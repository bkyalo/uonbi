{"version":3,"file":"drawernew.min.js","sources":["../src/drawernew.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Contains the logic to improve the course-index behaviour.\n *\n * @package   theme_uonbi\n * @author    Sumaiya Javed <sumaiya.javed@catalyst.net.nz>\n * @copyright Catalyst IT\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n define(['jquery', 'theme_boost/drawers', 'theme_boost/drawer'],\n function($, Drawers, Drawer) {\n\nreturn {\n    'init': function() {\n\n            // Create event object to target boostbar.\n            var e = $.Event(\"click\");\n            e.originalEvent = 'click';\n            e.target = 'button.navbar-toggler.aabtn.d-block';\n            var trigger = $(e.target).closest('[data-action=toggle-drawer]');\n\n            // When boost bar is expanded course index closes.\n            trigger.on(\"click\", function() {\n                const courseindexDrawer = Drawers.getDrawerInstanceForNode(document.querySelector(\n                    '#theme_boost-drawers-courseindex'));\n                var openBoost = trigger.attr('aria-expanded');\n                var openCI = courseindexDrawer.drawerNode.className.includes(\"show\");\n                if (!openBoost && !openCI) {\n                    // Manually open drawer.\n                    courseindexDrawer.openDrawer();\n                }\n                if (openBoost && openCI) {\n                    // Manually close drawer.\n                    courseindexDrawer.closeDrawer();\n                }\n            });\n\n            // When course index is expanded boost bar is closed.\n            // Listen to the before show event.\n            document.addEventListener(Drawers.eventTypes.drawerShow, event => {\n                var openBoost = trigger.attr('aria-expanded') == 'true';\n                if (!openBoost) {\n                    // Do nothing.\n                } else {\n                    trigger.trigger(\"click\");\n                }\n            });\n\n        }\n    };\n});\n\n"],"names":["define","$","Drawers","Drawer","e","Event","originalEvent","target","trigger","closest","on","courseindexDrawer","getDrawerInstanceForNode","document","querySelector","openBoost","attr","openCI","drawerNode","className","includes","openDrawer","closeDrawer","addEventListener","eventTypes","drawerShow","event"],"mappings":";;;;;;;;AAwBCA,oCAAO,CAAC,SAAU,sBAAuB,uBACzC,SAASC,EAAGC,QAASC,cAEf,MACK,eAGIC,EAAIH,EAAEI,MAAM,SAChBD,EAAEE,cAAgB,QAClBF,EAAEG,OAAS,0CACPC,QAAUP,EAAEG,EAAEG,QAAQE,QAAQ,+BAGlCD,QAAQE,GAAG,SAAS,iBACVC,kBAAoBT,QAAQU,yBAAyBC,SAASC,cAChE,yCACAC,UAAYP,QAAQQ,KAAK,iBACzBC,OAASN,kBAAkBO,WAAWC,UAAUC,SAAS,QACxDL,WAAcE,QAEfN,kBAAkBU,aAElBN,WAAaE,QAEbN,kBAAkBW,iBAM1BT,SAASU,iBAAiBrB,QAAQsB,WAAWC,YAAYC,QACJ,QAAjClB,QAAQQ,KAAK,kBAIzBR,QAAQA,QAAQ"}